---
title: "Homework 2"
author: "Vasili Fokaidis"
output: github_document
---

```{r}
library(tidyverse)
library(readxl)
```

## Problem 1

First, define a path to the dataset. 

```{r}
path_to_data = "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx"
```


Read the Mr. Trashwheel dataset.

```{r}
trashwheel_df =
  read_xlsx(
          path = path_to_data,
          sheet = "Mr. Trash Wheel",
          range = cell_cols("A:N")) %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>%
  mutate(
          sports_balls = round(sports_balls),
          sports_balls = as.integer(sports_balls)
  )
```

Read precipitation data! For 2018 and 2017

```{r}
precip_2018 =
  read_excel("./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2018 Precipitation",
    skip = 1
  ) %>%
  janitor::clean_names() %>%
  drop_na(month) %>%
  mutate(year = 2018) %>%
  relocate(year)

precip_2017 =
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2017 Precipitation",
    skip = 1
  ) %>%
  janitor::clean_names() %>%
  drop_na(month) %>%
  mutate(year = 2017) %>%
  relocate(year)
```


Now combine annual precipitation datasets and convert month to a character variable.

```{r}
month_df = 
        tibble(
                month = 1:12,
                month_name = month.name
        )

precip_df = 
        bind_rows(precip_2018, precip_2017)

precip_df =
        left_join(precip_df, month_df, by = "month")
```

This dataset contains the information from the Mr. Trashwheel trash collector located in Balitmore, Maryland. When trash enters the inner harbor, Mr. Trashwheel collects and dispenses the trash into a dumpster. This dataset contains information on the year, month, and trash collected, such as sports balls, cigarettes, glass bottles, and more. There are `r nrow(trashwheel_df)` rows in the final trashwheel dataset and `r nrow(precip_df)` rows in the final precipitation dataset. There are also additional data sheets including month precipitation data. In this dataset:

* The median number of sports balls found in a dumpster in 2017 was `r trashwheel_df %>% filter(year == 2017) %>% pull(sports_balls) %>% median()`
* The total precipitation in 2018 was `r precip_df %>% filter(year == 2018) %>% pull(total) %>% sum()` inches


## Problem 2

```{r}
library(readr)
```

Read NYC Transit dataset. Retain line, station name, station latitude/longitude, routes served, entry, vending, entrance type, and ADA compliance.

```{r}
nyc_transit_df =
              read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>%
  select(line, station_name, station_latitude, station_longitude, 6:16, entry, vending, entrance_type, ada) %>%
  mutate(entry = recode(entry,
                        YES = "TRUE",
                        NO = "FALSE"))
```
